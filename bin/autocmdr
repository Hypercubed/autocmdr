#!/usr/bin/env node

// node
var path			= require('path');

// autocmdr
var program  = require('../');

program
	.option('-g, --global', "use global autocmdr tasks");

// Plugins
require('../lib/logger')(program);
require('../lib/package')(program);
require('../lib/help')(program);

var argv = program.normalize(process.argv);

if (argv.indexOf('-g') > -1) {  // Global autocmdr
	require('../lib/loader')(program);
	require('../lib/config')(program);
} else {
	var cmdspath = path.join(process.cwd(), 'cmds/');
	var configpath = path.join(process.cwd(), '.autocmdr');

	require('../lib/loader')(program, { path: cmdspath });
	require('../lib/config')(program, { path: configpath });
}

require('../lib/completion')(program);

program.parse(argv);

if (program.args.length < 1 ) {
	program.log.error('No command specified. See \''+program._name+' --help\'.');
	program.outputHelp();
	process.exit(1);
}

